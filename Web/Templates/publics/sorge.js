!function(e){function t(t){for(var n,r,i=t[0],c=t[1],s=t[2],u=0,d=[];u<i.length;u++)r=i[u],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&d.push(o[r][0]),o[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);for(m&&m(t);d.length;)d.shift()();return l.push.apply(l,s||[]),a()}function a(){for(var e,t=0;t<l.length;t++){for(var a=l[t],n=!0,i=1;i<a.length;i++){var c=a[i];0!==o[c]&&(n=!1)}n&&(l.splice(t--,1),e=r(r.s=a[0]))}return e}var n={},o={0:0},l=[];function r(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=n,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(a,n,function(t){return e[t]}.bind(null,n));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/home/user/Sorge/Sorge/Web/Templates/publics";var i=window.webpackJsonp=window.webpackJsonp||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var s=0;s<i.length;s++)t(i[s]);var m=c;l.push([456,1]),a()}({303:function(e,t){},456:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),l=a(104),r=a.n(l),i=a(53),c=a(539),s=a(17),m=a(155),u=a.n(m),d=a(6),p=a.n(d),g=a(22),f=a(2),h=a(531),y=a(251),b=a(545),E=a(559),x=a(548),v=a(541),k=a(512),S=a(242),w=a(560),C=a(549),D=u()("https://sorge.ektu.kz"),T=a(111),B=a(555),j=a(4);function N(e){Object(s.g)().culture;var t=Object(s.e)(),a=Object(s.f)(),n=o.a.useState([]),l=p()(n,2),r=l[0],i=l[1],c=o.a.useState("sorge"),m=p()(c,2),u=m[0],d=m[1],g=o.a.useState(0),f=p()(g,2),h=f[0],E=f[1];o.a.useEffect((function(){fetch("/api/get_tabs",{method:"get"}).then((function(e){return e.json()})).then((function(n){i(n.tabs),d(n.system),""==a.pathname.replace("/","")&&t.push("/".concat(n.tabs[0].code)),e.setReady(!0)}))}),[]),o.a.useEffect((function(){if(r.length>0){var e=a.pathname.replace("/",""),t=r.filter((function(t){return t.code==e}));1==t.length&&E(t[0].itemKey)}}),[r]);var x=function(e,a){switch(console.log(e.props.code),e.props.code){case"api":window.open("https://sorge.ektu.kz/api?url=/api/".concat(u,".json"),"_blank").focus();break;case"prodigy":window.open("https://sorge.ektu.kz:444/?session=cm","_blank").focus();break;case"prodigy_api":window.open("https://sorge.ektu.kz:444/docs","_blank").focus();break;default:E(e.props.itemKey),t.push("/".concat(e.props.code))}};return o.a.createElement("header",{style:{width:"100%",height:"54px",borderBottom:"solid 1px #E6EDF3"}},o.a.createElement("div",{className:"header",style:{}},o.a.createElement("div",{className:"ms-Grid",dir:"ltr"},o.a.createElement("div",{class:"ms-Grid-row"},o.a.createElement("div",{class:"ms-Grid-col ms-sm7 ms-md8 ms-lg9"},o.a.createElement(b.a,{horizontal:!0,tokens:{childrenGap:12}},o.a.createElement("div",{className:"logo box noselect"},o.a.createElement(T.a,{iconName:"TFVCLogo",style:{fontSize:"28px",lineHeight:"34px"}}),o.a.createElement("div",{class:"ms-fontSize-24",style:{lineHeight:"30px"}},"Sorge")),o.a.createElement("div",{className:"pipe"},o.a.createElement(v.a,{"aria-label":"Basic Pivot Example",styles:{link:{height:54}},selectedKey:h,onLinkClick:x},r.map((function(e){return o.a.createElement(k.a,{headerText:e.text,code:e.code,itemKey:e.itemKey,onChange:function(t){return x(e.code)},styles:{}})})))))),o.a.createElement("div",{class:"ms-Grid-col ms-sm5 ms-md4 ms-lg3",style:{justifyContent:"flex-end",display:"flex"}},o.a.createElement(b.a,{horizontal:!0,tokens:{childrenGap:12},style:{display:"flex",flexDirection:"row",alignItems:"center",height:54}},o.a.createElement(B.a,{size:j.c.size40,text:"Администратор",initialsColor:j.a.lightBlue}),o.a.createElement(y.a,{text:"Выйти",onClick:function(){window.location.href="/api/logout"},allowDisabledFocus:!0,disabled:!1,checked:!1})))))))}Object(g.a)();var O=a(109),z=a.n(O),I=a(78),P=a.n(I),F=a(547),M=a(56),G=a(535),L=a(252),W=a(534),A=a(526),R=a(533),H=a(41),_=a(14),K=a(557);Object(g.a)();var V=Object(f.t)({fonts:{medium:{fontFamily:"Monaco, Menlo, Consolas",fontSize:"25px"}},nameText:{fontWeight:"bold"},exampleRoot:{marginTop:"20px"}}),J={type:M.a.largeHeader,title:"",subText:""},Z={main:{maxWidth:450}};function Y(e){var t=o.a.useState(e.table),a=p()(t,2),n=a[0],l=a[1],r=o.a.useState(e.index),i=p()(r,2),c=(i[0],i[1],o.a.useState(e.core)),s=p()(c,2),m=s[0],u=s[1],d=o.a.useState(new A.a({onSelectionChanged:function(){h({selectionDetails:Q()})}})),g=p()(d,2),f=g[0],h=g[1],b=o.a.useState(!0),E=p()(b,2),v=E[0],k=E[1],S=o.a.useState(J),w=p()(S,2),C=w[0],D=w[1],B=o.a.useState([]),j=p()(B,2),N=j[0],O=j[1],I=o.a.useState(!1),M=p()(I,2),Y=M[0],q=M[1],U=o.a.useMemo((function(){return{isBlocking:!0,styles:Z,dragOptions:{moveMenuItemText:"Move",closeMenuItemText:"Close",menu:W.a}}}),[!0]),Q=function(){f.getSelectedCount()},X=function(){k(!v)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(F.a,{selection:f},o.a.createElement(R.a,{items:n.rows,compact:!1,columns:n.columns,onColumnHeaderClick:function(t,a){if(!e.core&&a){u(a.fieldName);var n=Object.assign({},e.table);n.rows=P()(e.table.rows),l(n)}},selectionMode:H.b.multiple,getKey:function(e){return e.key},setKey:"multiple",selection:f,selectionPreservedOnEmptyClick:!0,onRenderItemColumn:function(e,t,a){var n=e[a.fieldName],l=!1;return null!=m&&"".concat(a.fieldName)=="".concat(m)&&"-"!=n&&(l=!0),0==l?o.a.createElement("span",null,n):o.a.createElement("b",{className:"core_column",onClick:function(){return function(e){if(e){q(!0),k(!1),O([]);var t=J;t.title=e,t.subText="",D(t),fetch("/api/wiki_pages",{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify({word:e})}).then((function(e){return e.json()})).then((function(t){var a=J;a.title=e,a.subText=t.info,D(a);var n=t.pages.map((function(e,t){return{key:t,activityDescription:[o.a.createElement("span",{key:1,style:{fontWeight:"bold"}},e),o.a.createElement("span",{key:2})],activityIcon:o.a.createElement(T.a,{iconName:"PageLink"}),isCompact:!0}}));O(n||[]),q(!1)})).catch((function(e){q(!1)}))}}(n)}},n)},layoutMode:_.e.justified,isHeaderVisible:!0,enterModalSelectionOnTouch:!0,ariaLabelForSelectionColumn:"Toggle selection",ariaLabelForSelectAllCheckbox:"Toggle selection for all items",checkButtonAriaLabel:"select row",onItemInvoked:function(e){}})),o.a.createElement(G.a,{hidden:v,onDismiss:X,dialogContentProps:C,modalProps:U,styles:{root:{minHeight:50}}},1==Y&&o.a.createElement(o.a.Fragment,null,o.a.createElement(x.a,{label:"Поиск ...",styles:{root:{paddingTop:"25px"}}})),N.map((function(e){return o.a.createElement(K.a,z()({},e,{key:e.key,className:V.exampleRoot}))})),o.a.createElement(L.a,null,o.a.createElement(y.a,{onClick:X,text:"Закрыть"}))))}var q=a(110),U=a.n(q),Q=a(550),X=a(558);Object(g.a)();Object(f.t)({});function $(e){var t=e.toggle,a=o.a.useState(e.hidden),n=p()(a,2),l=n[0],r=(n[1],o.a.useState(e.settings.from||0)),i=p()(r,2),c=i[0],s=i[1],m=o.a.useState(e.settings.to||0),u=p()(m,2),d=u[0],g=u[1],f=o.a.useState(e.settings.merge||!1),E=p()(f,2),x=E[0],v=E[1],k=o.a.useMemo((function(){return{isBlocking:!0,styles:w,dragOptions:{moveMenuItemText:"Move",closeMenuItemText:"Close",menu:W.a}}}),[!0]),S={type:M.a.normal,title:"Настройки для ссылки",subText:""},w={main:{maxWidth:450}},C={iconName:"IncreaseIndentLegacy"},D={spinButtonWrapper:{width:75},labelWrapper:{width:150}};o.a.useEffect((function(){}),[]);var T=o.a.useCallback((function(e,t){void 0!==t&&s(t)}),[]),B=o.a.useCallback((function(e,t){void 0!==t&&g(t)}),[]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(G.a,{hidden:l,onDismiss:t,dialogContentProps:S,modalProps:k},o.a.createElement("div",{style:{minHeight:60}},o.a.createElement(b.a,{tokens:{childrenGap:20}},o.a.createElement(Q.a,{label:"Начать с    ",iconProps:C,defaultValue:"0",min:0,max:1e3,step:1,onChange:T,value:c,styles:D}),o.a.createElement(Q.a,U()({label:"Закончить на",iconProps:C,styles:{labelWrapper:{width:150}},defaultValue:"0",min:0,max:1e3,step:1,onChange:B,value:d},"styles",D)),o.a.createElement(X.a,{label:"Объединить в одну",inlineLabel:!0,styles:{label:{width:150}},onText:"Да",offText:"Нет",checked:x,onChange:function(e,t){v(t)}}))),o.a.createElement(L.a,null,o.a.createElement(y.a,{onClick:function(a){return e.change({from:c,to:d,merge:x}),void t()},text:"Применить"}),o.a.createElement(h.a,{onClick:t,text:"Закрыть"}))))}function ee(e){var t=e.yes,a=e.toggle,n=o.a.useMemo((function(){return{isBlocking:!0,styles:r,dragOptions:{moveMenuItemText:"Move",closeMenuItemText:"Close",menu:W.a}}}),[!0]),l={type:M.a.normal,title:e.title,subText:e.subtext},r={main:{maxWidth:450}};return o.a.useEffect((function(){}),[]),o.a.createElement(o.a.Fragment,null,o.a.createElement(G.a,{hidden:!1,onDismiss:a,dialogContentProps:l,modalProps:n},o.a.createElement(L.a,null,o.a.createElement(h.a,{onClick:t,text:"Да"}),o.a.createElement(y.a,{onClick:a,text:"Нет"}))))}Object(g.a)();var te=Object(f.F)({exampleRoot:{marginTop:"20px"},nameText:{fontWeight:"bold"}}),ae=[{type:"PDF",url:"https://www.hse.ru/data/2010/05/25/1216899390/Doklad.pdf",title:"ГЕОЭКОНОМИКА И КОНКУРЕНТОСПОСОБНОСТЬ РОССИИ"},{type:"FileHTML",url:"https://poezdato.net/raspisanie-po-stancyi/kazahstan/poezda/",title:"Расписание поездов КТЖ"},{type:"FileHTML",url:"https://bilet.railways.kz/post/schedule",title:"Перечень пассажирских поездов"},{type:"FileImage",url:"https://uchet.kz/news/%D0%91%D0%B5%D0%B7%D1%8B%D0%BC%D1%8F%D0%BD%D0%BD%D1%8B%D0%B9hhh.png",title:"Валовый-внутренний продукт"},{type:"FileImage",url:"https://cf.ppt-online.org/files/slide/d/dgbFzC08V4m5usoPBvipOU2ZjRYWLcktDHflaq/slide-1.jpg",title:"Основные технико-экономические показатели"},{type:"FileImage",url:"https://uchitel.pro/wp-content/uploads/2017/09/%D0%B2%D0%B0%D0%B6%D0%BD%D0%B5%D0%B9%D1%88%D0%B8%D0%B5-%D1%80%D0%B5%D0%BA%D0%B8.jpg",title:"Важнейший реки"},{type:"PDF",url:"http://www.riverbp.net/%D0%9D%D0%B0%D1%86%20%D0%B4%D0%BE%D0%BA%D0%BB%D0%B0%D0%B4%20%D0%BE%20%D1%81%D0%BE%D1%81%D1%82%D0%BE%D1%8F%D0%BD%D0%B8%D0%B8%20%D0%BE%D0%BA%D1%80%20%D1%81%D1%80%D0%B5%D0%B4%D1%8B%20%D0%B2%D0%BE%D0%B4%D0%BD%D1%8B%D0%B5%20%D1%80%D0%B5%D1%81%D1%83%D1%80%D1%81%D1%8B.pdf",title:"Забор воды из природных источников по регионам Республики Казахстан"}];function ne(e){var t=e.toggle,a=e.select,n=o.a.useMemo((function(){return{isBlocking:!0,styles:r,dragOptions:{moveMenuItemText:"Move",closeMenuItemText:"Close",menu:W.a}}}),[!0]),l={type:M.a.normal,title:"Примеры",subText:"Ссылки для тестирования парсера"},r={main:{maxWidth:"600px !important"}},i=o.a.useState([]),c=p()(i,2),s=c[0],m=c[1];o.a.useEffect((function(){var e=ae.map((function(e,t){return{key:t+1,activityDescription:[o.a.createElement(C.a,{key:1,className:te.nameText,onClick:function(){u(e.url,t)}},e.title)],activityIcon:o.a.createElement(T.a,{iconName:e.type}),comments:[o.a.createElement("span",{key:t+1},e.url),o.a.createElement(C.a,{key:2,className:te.nameText,onClick:function(){u(e.url)}})],timeStamp:e.type}}));m(e)}),[]);var u=function(e,n){a(!0,e,n),t(!1)};return o.a.createElement(o.a.Fragment,null,s.length>0&&o.a.createElement(G.a,{hidden:!1,onDismiss:t,dialogContentProps:l,styles:{main:{maxWidth:"750px !important"}},modalProps:n},o.a.createElement("div",null,s.map((function(e){return o.a.createElement(K.a,z()({},e,{key:e.key,className:te.exampleRoot}))}))),o.a.createElement(L.a,null,o.a.createElement(y.a,{onClick:t,text:"Закрыть"}))))}Object(g.a)();var oe=Object(f.t)({fonts:{medium:{fontFamily:"Monaco, Menlo, Consolas",fontSize:"25px"}},empty:{fontSize:50,height:50,width:50,margin:"0 25px",color:"lightgray"}}),le={data:[],cores:[]};function re(){Object(s.g)().culture,Object(s.e)();var e=o.a.useState(!1),t=p()(e,2),a=t[0],n=t[1],l=o.a.useState(!1),r=p()(l,2),i=r[0],c=r[1],m=o.a.useState(""),u=p()(m,2),d=u[0],g=u[1],f=o.a.useState(!1),T=p()(f,2),B=T[0],j=T[1],O=o.a.useState({from:327,to:328,merge:!1}),z=p()(O,2),I=z[0],P=z[1],F=o.a.useState(null),M=p()(F,2),G=M[0],L=M[1],W=o.a.useState(!1),A=p()(W,2),R=A[0],H=A[1],_=o.a.useState(le),K=p()(_,2),V=K[0],J=K[1],Z=o.a.useState([]),q=p()(Z,2),U=q[0],Q=q[1],X=o.a.useState(!1),te=p()(X,2),ae=te[0],re=te[1];o.a.useEffect((function(){D.on("progress",ue)}),[]),o.a.useState((function(){if(window.localStorage.getItem("tables")){var e=window.localStorage.getItem("url")||"",t=JSON.parse(window.localStorage.getItem("tables"));try{var a=JSON.parse(window.localStorage.getItem("guids"));Q(a||[])}catch(e){}g(e),J(t||le)}}),[R]),o.a.useEffect((function(){d&&(window.localStorage.setItem("tables",JSON.stringify(V)),window.localStorage.setItem("url",d))}),[V]),o.a.useEffect((function(){U&&window.localStorage.setItem("guids",JSON.stringify(U))}),[U]),o.a.useState((function(){}),[I]);var ie,ce,se,me=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(e){if(a)switch(a){case 0:P({from:327,to:328,merge:!1});break;case 6:P({from:10,to:10,merge:!1})}g(t)}},ue=function(e){L(e.description)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(N,{setReady:H}),R&&o.a.createElement("div",{className:"main",style:{bottom:"0px",height:"calc(100% - 56px)",backgroundColor:"#faf9f8",position:"relative"}},o.a.createElement("div",{class:"ms-Grid",dir:"ltr",style:{height:"calc(100vh - 55px)",overflowY:"scroll",overflowX:"auto"}},o.a.createElement("div",{class:"ms-Grid-row",style:{height:"100%"}},o.a.createElement("div",{class:"ms-Grid-col ms-sm2 ms-md2ms-lg2"}),o.a.createElement("div",{class:"ms-Grid-col ms-sm8 ms-md8 ms-lg8",style:{height:"100%",backgroundColor:"#fff"}},o.a.createElement(b.a,{tokens:{childrenGap:10}},o.a.createElement("div",{style:{padding:"0px 32px",height:"100%",marginTop:12}},o.a.createElement("header",{style:{padding:"12px 0px",minHeight:50,boxSizing:"border-box"},className:"row"},o.a.createElement("h1",{className:"h1"},"Парсер"))),o.a.createElement("div",{style:{padding:"12px",boxSizing:"border-box"}},o.a.createElement(b.a,{horizontal:!0,tokens:{childrenGap:10},style:{justifyContent:"center"}},o.a.createElement(E.a,{placeholder:"Поиск таблиц на сайте",styles:{root:{width:600}},iconProps:{iconName:"Link"},onChange:me,clearButtonProps:{iconProps:{iconName:"Settings"},disabled:(ie=d,ce=ie.substring(ie.lastIndexOf("/")+1).split("."),se=ce[ce.length-1].toLowerCase(),!["pdf"].includes(se))},onClear:function(){j(!0)},value:d}),o.a.createElement(h.a,{disabled:1==ae,text:"Найти",onClick:function(e){return n(!0)},allowDisabledFocus:!0,checked:!1}),o.a.createElement(y.a,{disabled:1==ae,text:"Пример",onClick:function(e){return c(!0)},allowDisabledFocus:!0,checked:!1})),o.a.createElement(b.a,{tokens:{childrenGap:24},style:{marginTop:24},horizontal:!1},0==V.data.length&&0==ae&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{display:"flex",justifyContent:"center",marginTop:"150px"}},o.a.createElement(b.a,{tokens:{childrenGap:24},style:{marginTop:24},horizontal:!1},o.a.createElement(S.a,{"aria-label":"Compass",iconName:"ProductRelease",style:oe.empty}),o.a.createElement(w.a,{variant:"medium",nowrap:!0,block:!0,style:{textAlign:"center",color:"lightgray"}},"Нет данных")))),1==ae&&o.a.createElement(o.a.Fragment,null,o.a.createElement(x.a,{label:G||"Извелечение данных...",styles:{root:{paddingTop:"25px"}}})),V.data.length>0&&o.a.createElement(v.a,{"aria-label":"Basic Pivot Example",overflowBehavior:"menu",styles:{root:{display:"flex",justifyContent:"center",padding:"0 200px"}}},V.data.map((function(e,t){return o.a.createElement(k.a,{headerText:"Таблица #".concat(t+1)},o.a.createElement("div",null,o.a.createElement(Y,{table:e,index:t,core:V.cores[t]})),o.a.createElement("div",null,U.length==V.data.length&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{display:"flex",justifyContent:"center",height:"50px",alignItems:"center",fontWeight:600}},o.a.createElement(C.a,{href:"/api/get_table/".concat(U[t]),underline:!0,target:"_blank"},"Скачать ".concat(U[t],".json"))))))}))))))),o.a.createElement("div",{class:"ms-Grid-col ms-sm2 ms-md2 ms-lg2"})))),1==B&&o.a.createElement($,{settings:I,toggle:j,change:P,hidden:!B}),1==a&&o.a.createElement(ee,{title:"Sorge",subtext:"Выполнить поиск таблиц?",toggle:n,yes:function(){n(!1),L(null),d&&(re(!0),J({data:[],cores:[]}),fetch("/api/get_tables",{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify({url:d,settings:I})}).then((function(e){return e.json()})).then((function(e){if(e.result){var t=[];e.result.map((function(e){try{var a=Object.keys(e[0]),n=(a=a.map((function(e){return e.replace(/(\r\n|\n|\r)/gm," ").replace("/"," ")}))).map((function(e,t){return{key:"column".concat(t),name:e,fieldName:e,minWidth:100,maxWidth:200,isRowHeader:!0,isResizable:!0,isSorted:0==t,isSortedDescending:!1,sortAscendingAriaLabel:"Sorted A to Z",sortDescendingAriaLabel:"Sorted Z to A",data:"string",isPadded:!0}})),o=e.map((function(e,t){var n={};n.key=t,e.key=function(e){return this[Object.keys(this)[e]]};for(var o=0;o<a.length;o++){var l=e.key(o);n["".concat(a[o])]=l}return n}));t.push({columns:n,rows:o})}catch(e){console.error(e)}})),J({data:t,cores:e.cores}),Q(e.guids),re(!1)}})).catch((function(e){J({data:[],cores:[]}),re(!1)})))},hidden:!a}),1==i&&o.a.createElement(ne,{toggle:c,select:me,hidden:!i}))}var ie=a(543),ce=a(561);Object(g.a)();var se={root:{maxWidth:440,minWidth:320,minHeight:400,marginLeft:"auto",marginRight:"auto",boxShadow:"0 2px 6px rgb(0 0 0 / 20%)",backgroundColor:"#fff",width:"calc(100% - 40px)",marginBottom:"28px",padding:"44px"}};function me(){Object(s.g)().culture;var e=Object(s.e)(),t=o.a.useState(""),a=p()(t,2),n=a[0],l=a[1],r=o.a.useState(!1),i=p()(r,2),c=i[0],m=i[1],u=o.a.useState(""),d=p()(u,2),g=d[0],f=d[1],y=o.a.useState(0),E=p()(y,2),x=E[0],v=(E[1],o.a.useRef(null));o.a.useEffect((function(){}),[x]);var k=function(){fetch("/api/login",{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify({login:"admin",password:n,remember:c})}).then((function(e){switch(e.status){case 200:return e.json();default:return e.text()}})).then((function(t){"string"==typeof t||t instanceof String?f(t):1==t.result&&e.push("/")})).catch((function(e,t){console.log(e,t)}))};return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"main",ref:v,style:{backgroundColor:"#faf9f8"}},o.a.createElement("div",{className:"middle"},o.a.createElement("div",{className:"outer"},o.a.createElement("div",{style:se.root,className:"box ms-motion-scaleDownIn login-form"},o.a.createElement(b.a,{tokens:{childrenGap:24}},o.a.createElement(b.a,{tokens:{childrenGap:12},horizontal:!0,style:{color:"grey"}},o.a.createElement(T.a,{iconName:"TFVCLogo",style:{fontSize:"32px"}}),o.a.createElement("div",{class:"ms-fontSize-28",style:{}},"Sorge")),o.a.createElement(b.a,{tokens:{childrenGap:12},horizontal:!0},o.a.createElement(B.a,{secondaryText:"Username: admin",text:"Администратор",size:j.c.size40,initialsColor:j.a.lightBlue})),o.a.createElement(b.a,{tokens:{childrenGap:12}},o.a.createElement("div",{class:"ms-fontSize-24",style:{}},"Введите пароль"),o.a.createElement(ie.a,{type:"password",value:n,onChange:function(e){return l(e.target.value)},canRevealPassword:!0,errorMessage:g,onKeyDown:function(e){13==e.keyCode&&k()},revealPasswordAriaLabel:"Show password"}),o.a.createElement(ce.a,{label:"Оставаться в системе",checked:c,onChange:function(e){return m(e.target.value)}})),o.a.createElement(b.a,{horizontal:!0,style:{justifyContent:"flex-end"}},o.a.createElement(h.a,{disabled:!1,text:"Войти",onClick:k,allowDisabledFocus:!0,checked:!1}))))))))}function ue(){Object(s.g)().culture,Object(s.e)();var e=o.a.useState(!1),t=p()(e,2),a=(t[0],t[1]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(N,{setReady:a}),o.a.createElement("div",{className:"main",style:{bottom:"0px",height:"calc(100% - 54px)",backgroundColor:"#faf9f8",position:"relative"}},o.a.createElement("div",{style:{padding:"0px 32px",height:"100%"}},o.a.createElement("header",{style:{padding:"52px 0px",minHeight:136},className:"row"},o.a.createElement("h1",{className:"h1"},"Настройки")))))}var de=a(249),pe=a.n(de),ge=a(544);Object(g.a)();var fe=[{key:"word",name:"Слово",fieldName:"word",minWidth:150,maxWidth:350,isRowHeader:!0,isResizable:!0,isSorted:!1,isSortedDescending:!1,sortAscendingAriaLabel:"Sorted A to Z",sortDescendingAriaLabel:"Sorted Z to A",data:"string",isPadded:!0},{key:"score",name:"Score",fieldName:"score",minWidth:70,maxWidth:90,isResizable:!0,isSorted:!0,isSortedDescending:!1,data:"number",isPadded:!0}];function he(e){var t=e.toggle,a=o.a.useMemo((function(){return{isBlocking:!0,styles:l,dragOptions:{moveMenuItemText:"Move",closeMenuItemText:"Close",menu:W.a}}}),[!0]),n={type:M.a.largeHeader,title:e.title,subText:e.subtext},l={main:{maxWidth:550}},r=o.a.useState(e.words),i=p()(r,2),c=(i[0],i[1],o.a.useState([])),s=p()(c,2),m=s[0],u=s[1],d=o.a.useState(new A.a({onSelectionChanged:function(){h({selectionDetails:E()})}})),g=p()(d,2),f=g[0],h=g[1];o.a.useEffect((function(){var t=e.words.map((function(e,t){var a={};return a.key=t,a.word=e[1],a.score=Math.round(100*(e[0]+Number.EPSILON))/100,a}));u(t.filter((function(e){return e.score>0})).sort(b))}),[]);var b=function(e,t){return e.score<t.score?1:e.score>t.score?-1:0},E=function(){f.getSelectedCount()};return o.a.createElement(o.a.Fragment,null,o.a.createElement(G.a,{hidden:!1,onDismiss:t,dialogContentProps:n,styles:{main:{maxWidth:"750px !important"}},modalProps:a},o.a.createElement(R.a,{items:m,compact:!0,columns:fe,onColumnHeaderClick:function(e,t){},selectionMode:H.b.multiple,getKey:function(e){return e.key},setKey:"multiple",selection:f,selectionPreservedOnEmptyClick:!1,onRenderItemColumn:function(e,t,a){var n=e[a.fieldName];return o.a.createElement("span",null,n)},layoutMode:_.e.justified,isHeaderVisible:!0,enterModalSelectionOnTouch:!0,ariaLabelForSelectionColumn:"Toggle selection",ariaLabelForSelectAllCheckbox:"Toggle selection for all items",checkButtonAriaLabel:"select row",onItemInvoked:function(e){}}),o.a.createElement(L.a,null,o.a.createElement(y.a,{onClick:t,text:"Закрыть"}))))}a(454);var ye=a(536),be=a(166),Ee=a(552);function xe(e){var t=e.toggle,a=o.a.useMemo((function(){return{isBlocking:!0,styles:l,dragOptions:{moveMenuItemText:"Move",closeMenuItemText:"Close",menu:W.a}}}),[!0]),n={type:M.a.largeHeader,title:e.title,subText:e.subtext},l={main:{maxWidth:750}},r=o.a.useState(e.graph||{nodes:[],edges:[]}),i=p()(r,2),c=i[0],s=(i[1],o.a.useState(e.matchers||[])),m=p()(s,2),u=m[0];m[1];return o.a.useEffect((function(){}),[]),o.a.createElement(o.a.Fragment,null,o.a.createElement(G.a,{hidden:!1,onDismiss:function(){return t(!1)},dialogContentProps:n,styles:{main:{maxWidth:"750px !important"}},modalProps:a},o.a.createElement("div",{style:{minWidth:"650px",maxWidth:"700px",maxHeight:"400px",overflowY:"auto"}},c.edges.map((function(e,t){var a=c.nodes.filter((function(t){return t.id==e.from}))[0].label,n=c.nodes.filter((function(t){return t.id==e.to}))[0].label,l=u[t];return o.a.createElement(b.a,{tokens:{childrenGap:24},style:{padding:"6px 12px ",borderTop:"dotted 1px grey"},horizontal:!0},o.a.createElement(b.a.Item,{styles:{root:{width:"34%"}}},o.a.createElement("div",{className:"ms-fontSize-16"},a),o.a.createElement("div",{className:"ms-fontSize-12",style:{color:"rgb(0, 120, 212)"}},l[0])),o.a.createElement(b.a.Item,{styles:{root:{width:"22%"}}},o.a.createElement("div",{className:"ms-fontSize-16"},e.label),o.a.createElement("div",{className:"ms-fontSize-12",style:{color:"rgb(0, 120, 212)"}},l[1])),o.a.createElement(b.a.Item,{styles:{root:{width:"34%"}}},o.a.createElement("div",{className:"ms-fontSize-16"},n),o.a.createElement("div",{className:"ms-fontSize-12",style:{color:"rgb(0, 120, 212)"}},l[2])))}))),o.a.createElement(L.a,null,o.a.createElement(y.a,{onClick:function(){return t(!1)},text:"Закрыть"}))))}Object(g.a)();var ve=a(532),ke=a(538),Se=a(546),we=a(513),Ce=a(551),De=[{key:"russian",text:"Русский",iconProps:{iconName:"LocaleLanguage"},checked:!0},{key:"english",text:"English",iconProps:{iconName:"LocaleLanguage"},disabled:!1},{key:"kazakh",text:"Қазақша",iconProps:{iconName:"LocaleLanguage"},disabled:!1}],Te={locale:"ru",physics:{enabled:!0,maxVelocity:10,solver:"repulsion",stabilization:{enabled:!1},repulsion:{centralGravity:.1}},autoResize:!0,edges:{color:"#0078d4",font:{size:10},arrows:{to:{enabled:!0,scaleFactor:1,type:"arrow"},from:{enabled:!1,scaleFactor:1,type:"arrow"}},smooth:{type:"dynamic",forceDirection:"none"},shadow:!0},nodes:{font:{size:14,face:"Verdana"},shape:"dot",shadow:!0},interaction:{hideEdgesOnDrag:!0,tooltipDelay:200,keyboard:!1,navigationButtons:!0}};function Be(){Object(s.g)().culture,Object(s.e)();var e=Object(we.a)("sliderTarget"),t=o.a.useState([{key:"basic",text:"Low-resource",action:"build",iconProps:{iconName:"GitGraph"},checked:!0},{key:"spacy",text:"Rule-based",action:"knowlegegraph",iconProps:{iconName:"GitGraph"},disabled:!1},{key:"bert",text:"Deep learning",action:"knowlegegraph",iconProps:{iconName:"GitGraph"},disabled:!1}]),a=p()(t,2),n=a[0],l=a[1],r=o.a.useState([{key:"rake",text:"Rake",iconProps:{iconName:"Quantity"},checked:!0},{key:"tfidf",text:"TF iDF",iconProps:{iconName:"Quantity"},disabled:!1}]),i=p()(r,2),c=i[0],m=i[1],u=o.a.useState([{key:"entities",text:"Сущности",iconProps:{iconName:"LookupEntities"},split:!0,onClick:function(){return Le(!0)}},{key:"patterns",text:"Анализ связей",iconProps:{iconName:"ThumbnailViewMirrored"},split:!0,onClick:function(){return rt()}},{key:"save",text:"Сохранить",iconProps:{iconName:"Save"},onClick:function(){return lt()}}]),d=p()(u,2),g=d[0],f=d[1],y=o.a.useState([{id:e,key:"edge_streng",text:"Сила связи",ariaLabel:"Сила связи",iconOnly:!0,iconProps:{iconName:"BranchFork2"},onClick:function(){return C(!0)}}]),E=p()(y,2),v=E[0],k=(E[1],o.a.useState(!1)),S=p()(k,2),w=S[0],C=S[1],D=o.a.useState(.2),T=p()(D,2),B=T[0],j=T[1],O=o.a.useState([]),z=p()(O,2),I=z[0],F=z[1],M=o.a.useState(null),G=p()(M,2),L=G[0],W=G[1],A=o.a.useState("rake"),R=p()(A,2),H=R[0],_=R[1],K=o.a.useState("russian"),V=p()(K,2),J=V[0],Z=V[1],Y=o.a.useState(!1),q=p()(Y,2),Q=q[0],$=q[1],ee=o.a.useState(""),te=p()(ee,2),ae=te[0],ne=te[1],oe=o.a.useState(!1),le=p()(oe,2),re=le[0],ce=le[1],se=o.a.useState({nodes:[],edges:[]}),me=p()(se,2),ue=me[0],de=me[1],fe=o.a.useState([]),Be=p()(fe,2),je=Be[0],Ne=Be[1],Oe=o.a.useState([]),ze=p()(Oe,2),Ie=ze[0],Pe=ze[1],Fe=o.a.useState(!1),Me=p()(Fe,2),Ge=Me[0],Le=Me[1],We=o.a.useState(n[1]),Ae=p()(We,2),Re=Ae[0],He=Ae[1],_e=o.a.useState(!0),Ke=p()(_e,2),Ve=Ke[0],Je=Ke[1],Ze=o.a.useState(!1),Ye=p()(Ze,2),qe=Ye[0],Ue=Ye[1],Qe=o.a.useState(!0),Xe=p()(Qe,2),$e=Xe[0],et=Xe[1];o.a.useEffect((function(){document.title="Sorge - Концепт карта",at(J),tt()}),[]),o.a.useEffect((function(){if(ue.nodes.length>0){var e=document.getElementsByClassName("vis-network");e.length>0&&e[0].scrollIntoView()}}),[ue]),o.a.useEffect((function(){if(""!=J&&n){var e=P()(n);J==De[2].key?(e[2].disabled=!0,He(n[1])):delete e[2].disabled,Ve&&at(J),l(e),W(null)}}),[J]),o.a.useEffect((function(){if(Re){var e=c.map((function(e){return"basic"!=Re.key?e.disabled=!0:delete e.disabled,e}));m(e);var t=P()(g);"basic"==Re.key?t[1].disabled=!0:delete t[1].disabled,f(t),W(null)}}),[Re]);var tt=function(){fetch("/maps/get_models",{method:"get"}).then((function(e){return e.json()})).then((function(e){var t=e.map((function(e){return 1==e.ishead?{key:e.key,text:e.text,itemType:ve.a.Header,language:e.language}:1==e.isdeliver?{key:e.key,text:"-",itemType:ve.a.Divider,language:e.language}:{key:e.key,text:e.text,language:e.language}}));F(t)}))},at=function(e){fetch("/maps/example",{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify({language:e})}).then((function(e){return e.json()})).then((function(e){ne(e.value)}))},nt=function(){if(ae.length>0){ce(!0),ot();var e=ae.replace(/\s+/g," "),t=L;t&&(t=t.replace("{0}",1==$e?"gpu":"cpu")),fetch("/maps/".concat(Re.action),{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify({text:e,method:H,relation:Re.key,language:J,sa:t})}).then((function(e){return e.json()})).then((function(e){e.data&&(de({nodes:e.data.nodes,edges:e.data.edges}),Ne(e.data.matchers),Pe(e.data.words)),ce(!1)})).catch((function(e){ce(!1)}))}},ot=function(){de({nodes:[],edges:[]}),Ne([]),Pe([])},lt=function(){var e=document.getElementsByTagName("canvas")[0].toDataURL("image/png");window.open("about:blank","image from canvas").document.write("<img src='"+e+"' alt='from canvas'/>")},rt=function(){Ue(!0)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(N,{setReady:$}),Q&&!be.isMobile&&o.a.createElement("div",{className:"main",style:{bottom:"0px",height:"calc(100% - 56px)",backgroundColor:"#faf9f8",position:"relative"}},o.a.createElement("div",{class:"ms-Grid",dir:"ltr",style:{height:"calc(100vh - 55px)",overflowY:"scroll",overflowX:"auto"}},o.a.createElement("div",{class:"ms-Grid-row",style:{height:"100%"}},o.a.createElement("div",{class:"ms-Grid-col ms-sm2 ms-md2ms-lg2"}),o.a.createElement("div",{class:"ms-Grid-col ms-sm8 ms-md8 ms-lg8",style:{minHeight:"100%",backgroundColor:"#fff",height:"max-content"}},o.a.createElement(b.a,{tokens:{childrenGap:10}},o.a.createElement("div",{style:{padding:"0px 32px",height:"100%",marginTop:12}},o.a.createElement("header",{style:{padding:"12px 0px",minHeight:50,boxSizing:"border-box"},className:"row"},o.a.createElement("h1",{className:"h1"},"Концепт карта"))),o.a.createElement("div",{style:U()({padding:"12px",boxSizing:"border-box"},"padding","0 24px")},o.a.createElement(b.a,{horizontal:!0,tokens:{childrenGap:10},style:{justifyContent:"center"}},o.a.createElement(ie.a,{label:"Текст для обработки",multiline:!0,rows:5,styles:{root:{width:"100%",borderColor:"rgb(107, 148, 184)"},fieldGroup:{borderColor:"rgb(107, 148, 184)"}},required:!0,value:ae,readOnly:re,description:"".concat(ae.length," символов"),onBlur:function(){return function(e){""!=e&&fetch("/maps/detect",{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify({text:e})}).then((function(e){return e.json()})).then((function(e){Z(e.value)}))}(ae)},onChange:function(e){return t=e.target.value,void ne(t);var t}})),o.a.createElement(b.a,{tokens:{childrenGap:24},style:{marginTop:12},horizontal:!0},o.a.createElement(X.a,{label:"Использовать демонстративный текст при переключении языка",checked:Ve,inlineLabel:!0,onChange:function(e,t){Je(t)}})),o.a.createElement(b.a,{tokens:{childrenGap:24},style:{marginTop:12},horizontal:!0},o.a.createElement(b.a.Item,null,o.a.createElement(ge.a,{label:"Язык текста",defaultSelectedKey:"russian",selectedKey:J,options:De,onChange:function(e,t){Z(t.key)}})),o.a.createElement(b.a.Item,null,o.a.createElement(ge.a,{label:"Способ построения карты",defaultSelectedKey:"rake",selectedKey:Re.key,options:n,onChange:function(e,t){He(t),ot()}})),o.a.createElement(b.a.Item,null,o.a.createElement(ge.a,{label:"Метод извлечения ключевых слов",defaultSelectedKey:"rake",selectedKey:H,options:c,onChange:function(e,t){_(t.key),ot()}}))),o.a.createElement(b.a,{tokens:{childrenGap:24},style:{marginTop:24},horizontal:!0},o.a.createElement(b.a.Item,null,["basic","spacy"].includes(Re.key)&&o.a.createElement(h.a,{styles:{root:{width:292}},text:"Построить",onClick:function(){return nt()},allowDisabledFocus:!0,disabled:0==ae.length||re,checked:!1}),["bert"].includes(Re.key)&&o.a.createElement(b.a,{tokens:{childrenGap:24},horizontal:!0},o.a.createElement(b.a.Item,null,o.a.createElement(b.a,{tokens:{childrenGap:24},horizontal:!1},o.a.createElement(b.a.Item,null,o.a.createElement(ke.a,{required:!0,placeholder:"Выберите модель",label:"Обученные модели",options:I.filter((function(e){return e.language==J})),styles:{dropdown:{width:292}},onChanged:function(e,t){W(I[t].key)}})),o.a.createElement(b.a.Item,null,o.a.createElement(h.a,{styles:{root:{width:292}},text:"Построить",onClick:function(){return nt()},allowDisabledFocus:!0,disabled:0==ae.length||re||null==L,checked:!1})))),o.a.createElement(b.a.Item,null,o.a.createElement(b.a,{tokens:{childrenGap:24},horizontal:!1},o.a.createElement(b.a.Item,null,o.a.createElement(X.a,{label:"Использовать трансформеры",checked:$e,onText:"Да",offText:"Нет",onChange:function(e,t){et(t)}}))))))),1==re&&o.a.createElement(o.a.Fragment,null,o.a.createElement(x.a,{label:"Построение...",styles:{root:{paddingTop:"125px"}}})),ue.nodes.length>0&&o.a.createElement(o.a.Fragment,null,o.a.createElement(ye.a,{items:g,farItems:"bert"==Re.key?v:[],styles:{root:{marginTop:"24px",paddingLeft:"6px",borderTop:"1px solid rgb(107, 148, 184)",paddingTop:"8px"}}}),o.a.createElement(pe.a,{id:"graph",graph:ue,options:Te,style:{height:"600px",backgroundColor:"rgb(243, 242, 241)",margin:"24px 0px",marginTop:"0px",backgroundImage:"linear-gradient(white .4rem, transparent .4rem), linear-gradient(90deg, white .4rem, transparent .4rem)",backgroundSize:"5rem 5rem"}})),1==Ge&&o.a.createElement(he,{title:"Ключевые слова",subtext:"",words:Ie,toggle:Le}),qe&&o.a.createElement(xe,{toggle:Ue,graph:ue,matchers:je,title:"Анализ связей",subtext:"bert"==Re.key?"Сила связи между сущностями":"Используемые шаблоны для сущностей"}),w&&o.a.createElement(Se.a,{target:"#".concat(e),primaryButtonProps:{children:"Применить",onClick:function(){}},secondaryButtonProps:{children:"Сбросить",onClick:function(){}},onDismiss:function(){return C(!1)},headline:"Настроить порог связи между сущностями"},o.a.createElement(Ce.a,{styles:{titleLabel:{color:"white"},activeSection:{background:"rgb(78, 173, 245)",":hover":{background:"rgb(78, 173, 245) !important"},":active":{background:"rgb(78, 173, 245) !important"}},valueLabel:{color:"white"}},label:"Значение",min:0,max:1,step:.1,value:B,defaultValue:B,onChange:function(e){return j(e)},showValue:!0,snapToStep:!0})))))))),Q&&be.isMobile&&o.a.createElement(o.a.Fragment,null,o.a.createElement(Ee.a,null,"Недоступен для мобильной версии.")))}function je(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(s.a,{exact:!0,path:"/",component:re}),o.a.createElement(s.a,{exact:!0,path:"/parser",component:re}),o.a.createElement(s.a,{exact:!0,path:"/login",component:me}),o.a.createElement(s.a,{exact:!0,path:"/maps",component:Be}),o.a.createElement(s.a,{exact:!0,path:"/settings",component:ue}))}var Ne=document.getElementById("root");r.a.render(o.a.createElement(i.a,null,o.a.createElement(c.a,{applyTo:"body",theme:{palette:{}},style:{height:"100%"}},o.a.createElement(je,null))),Ne)}});